module Kangaru
  class Database
    include Concerns::AttributesConcern
    extend  Concerns::AttributesConcern::ClassMethods

    class AdaptorError < StandardError
    end

    class SQLiteError < StandardError
    end

    attr_accessor adaptor: Symbol
    attr_accessor path: String
    attr_accessor migration_path: String

    attr_reader handler: Sequel::Database

    def setup!: -> void

    def migrate!: -> void

    private

    def migrations_exist?: -> bool

    def setup_sqlite!: -> Sequel::Database
  end
end
