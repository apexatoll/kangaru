module Kangaru
  class Application
    extend Forwardable

    attr_reader paths: Paths
    attr_reader namespace: Module
    attr_reader config: Config
    attr_reader database: Database

    # Delegated to paths
    attr_reader name: String
    attr_reader dir: Pathname
    def view_path: (controller: String, action: String, ?ext: Symbol?) -> Pathname

    def initialize: (source: String, namespace: Module) -> void

    def configure: { (Config) -> void } -> void

    def run!: (Array[String]) -> void

    private

    attr_reader autoloader: Zeitwerk::Loader

    def setup: -> void
  end
end
